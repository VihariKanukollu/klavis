# Complete nginx config for all MCP services
worker_processes auto;
error_log /var/log/nginx/error.log warn;
pid /var/run/nginx.pid;

events {
    worker_connections 1024;
}

http {
    include /etc/nginx/mime.types;
    default_type application/octet-stream;
    
    access_log /var/log/nginx/access.log;
    
    sendfile on;
    keepalive_timeout 65;
    
    server {
        listen 80;
        
        # Health check endpoint - MUST WORK for Render
        location /healthz {
            return 200 'OK';
            add_header Content-Type text/plain;
        }
        
        # Root endpoint
        location / {
            return 200 'MCP Proxy Server Running';
            add_header Content-Type text/plain;
        }
        
        # MCP Services
        location /affinity/mcp/ { proxy_pass http://localhost:5001; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /attio/mcp/ { proxy_pass http://localhost:5002; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /close/mcp/ { proxy_pass http://localhost:5003; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /hubspot/mcp/ { proxy_pass http://localhost:5004; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /salesforce/mcp/ { proxy_pass http://localhost:5005; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /gong/mcp/ { proxy_pass http://localhost:5006; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /asana/mcp/ { proxy_pass http://localhost:5007; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /clickup/mcp/ { proxy_pass http://localhost:5008; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /jira/mcp/ { proxy_pass http://localhost:5009; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /linear/mcp/ { proxy_pass http://localhost:5010; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /monday/mcp/ { proxy_pass http://localhost:5011; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /motion/mcp/ { proxy_pass http://localhost:5012; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /freshdesk/mcp/ { proxy_pass http://localhost:5013; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /mailchimp/mcp/ { proxy_pass http://localhost:5014; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /resend/mcp/ { proxy_pass http://localhost:5015; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /slack/mcp/ { proxy_pass http://localhost:5016; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /discord/mcp/ { proxy_pass http://localhost:5017; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /gmail/mcp/ { proxy_pass http://localhost:5018; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /google_calendar/mcp/ { proxy_pass http://localhost:5019; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /google_meet/mcp/ { proxy_pass http://localhost:5020; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /twilio/mcp/ { proxy_pass http://localhost:5021; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /whatsapp/mcp/ { proxy_pass http://localhost:5022; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /cal_com/mcp/ { proxy_pass http://localhost:5023; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /confluence/mcp/ { proxy_pass http://localhost:5024; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /notion/mcp/ { proxy_pass http://localhost:5025; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /google_docs/mcp/ { proxy_pass http://localhost:5026; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /google_sheets/mcp/ { proxy_pass http://localhost:5027; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /google_slides/mcp/ { proxy_pass http://localhost:5028; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /google_drive/mcp/ { proxy_pass http://localhost:5029; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /dropbox/mcp/ { proxy_pass http://localhost:5030; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /onedrive/mcp/ { proxy_pass http://localhost:5031; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /wordpress/mcp/ { proxy_pass http://localhost:5032; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /postgres/mcp/ { proxy_pass http://localhost:5033; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /supabase/mcp/ { proxy_pass http://localhost:5034; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /airtable/mcp/ { proxy_pass http://localhost:5035; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /shopify/mcp/ { proxy_pass http://localhost:5036; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /stripe/mcp/ { proxy_pass http://localhost:5037; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /quickbooks/mcp/ { proxy_pass http://localhost:5038; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /moneybird/mcp/ { proxy_pass http://localhost:5039; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /coinbase/mcp/ { proxy_pass http://localhost:5040; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /github/mcp/ { proxy_pass http://localhost:5041; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /brave_search/mcp/ { proxy_pass http://localhost:5042; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /exa/mcp/ { proxy_pass http://localhost:5043; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /tavily/mcp/ { proxy_pass http://localhost:5044; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /firecrawl/mcp/ { proxy_pass http://localhost:5045; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /firecrawl_deep_research/mcp/ { proxy_pass http://localhost:5046; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /hacker_news/mcp/ { proxy_pass http://localhost:5047; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /linkedin/mcp/ { proxy_pass http://localhost:5048; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /youtube/mcp/ { proxy_pass http://localhost:5049; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /spotify/mcp/ { proxy_pass http://localhost:5050; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /openrouter/mcp/ { proxy_pass http://localhost:5051; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /heygen/mcp/ { proxy_pass http://localhost:5052; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /markitdown/mcp/ { proxy_pass http://localhost:5053; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /pandoc/mcp/ { proxy_pass http://localhost:5054; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /report_generation/mcp/ { proxy_pass http://localhost:5055; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /mem0/mcp/ { proxy_pass http://localhost:5056; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /google_jobs/mcp/ { proxy_pass http://localhost:5057; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
        location /mixpanel/mcp/ { proxy_pass http://localhost:5058; proxy_http_version 1.1; proxy_set_header Connection ''; proxy_buffering off; }
    }
}
